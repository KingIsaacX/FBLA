<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create-a-posting</title>
    <link rel="stylesheet" href="./assets/styles.css">
  </head>
  <body>
    <div class="top-bar">
        <a href="index.html"><div class="logo">Home</div></a>
            <ul class="nav-links">
                <a href="">Postings</a>
                <a href="register.html">Register</a>
                <a href="login.html">Log in</a>
            </ul>
    </div>

    <!-- Job Posting Form Section -->
    <div class="posting-container">
      <h2>Create a Job Posting</h2>
      <form id="job-posting-form">
        <label for="job-company" >Company Name:</label>
        <input type="text" id="job-company" name="jobCompany" required ><p></p>

        <label for="job-title" >Job Title:</label>
        <input type="text" id="job-title" name="jobTitle" required ><p></p>
        
        <label for="job-description" >Job Description:</label>
        <input type="text" id = "job-description"name="jobDescription" required></input><p></p>
        
        <label for="required-skills">Required Skills:</label>
        <input type="text" id="required-skills" name="requiredSkills" placeholder="e.g., JavaScript, teamwork" required><p></p>
        
        <label for="salary-range">Starting Salary:</label>
        <input type="text" id="salary-range" name="salaryRange" placeholder="e.g., $50,000 - $60,000" required><p></p>
        
        <label for="job-location" >Location:</label>
        <input type="text" id="job-location" name="jobLocation" required><p></p>
        
        <label for="job-type" >Job Type:</label>
        <select id="job-type" name="jobType" required style="width: 50%; padding: 10px; margin: 25px; align-items: center; justify-content: center; display: flex; box-shadow: 2px 2px 5px gray;">
          <option value="full-time">Full-Time</option>
          <option value="part-time">Part-Time</option>
          <option value="internship">Internship</option>
        </select><p></p>

        <button id="submit-button" style="box-shadow: 2px 2px 5px gray; cursor: pointer; padding: 15px; justify-content: center;">POST JOB</button>
      

    </div>
    <script>
        const jobDataList = [];
        document.getElementById("submit-button").addEventListener('click', function(event) {
            event.preventDefault();
            //stores values from fields into jobDataList in 'fieldtype:value' format
            jobDataList.push({companyName: document.getElementById('job-company').value,
            title: document.getElementById('job-title').value,
            description: document.getElementById('job-description').value,
            skills: document.getElementById('required-skills').value,
            salary: document.getElementById('salary-range').value,
            location: document.getElementById('job-location').value,
            type: document.getElementById('job-type').value,
            author: sessionStorage.getItem('currAccount').username});

            //stores jobDataList into a list called 'existingArr' which is a temporary variable for the localstorage list
            const existingArr = JSON.parse(localStorage.getItem("allArrays")) || [];
            existingArr.push(jobDataList);
            localStorage.setItem("acceptedArrs",JSON.stringify(existingArr));

            //pushes the user back to homescreen after hitting submit
            window.location.href = 'index.html';
  
        });
    </script>
  </body>
</html>